tags:
  - name: Experiencia del Cliente
    description: Atención en sala y ocupación.

paths:
  /cx/service-quality:
    get:
      summary: 5.1 Calidad de Servicio (Tiempos de Respuesta)
      tags: [Experiencia del Cliente]
      description: Tiempo promedio de atención a solicitudes en mesa.
      responses:
        200:
          description: Éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  service_quality:
                    type: object
                    properties:
                      avg_response_minutes:
                        type: number
                        example: 2.5
                      pending_calls:
                        type: integer
                        example: 1
  /cx/room-occupancy:
    get:
      summary: 5.2 Ocupación de Sala
      tags: [Experiencia del Cliente]
      description: Porcentaje de mesas ocupadas en tiempo real.
      responses:
        200:
          description: Éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  room_occupancy:
                    type: object
                    properties:
                      percentage:
                        type: number
                        example: 75.0
                      occupied:
                        type: integer
                        example: 15
                      total:
                        type: integer
                        example: 20
  /cx/ghost-clients:
    get:
      summary: 5.3 Detección de Clientes Fantasma
      tags: [Experiencia del Cliente]
      description: Mesas ocupadas sin actividad reciente.
      responses:
        200:
          description: Éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  ghost_clients:
                    type: object
                    properties:
                      count:
                        type: integer
                        example: 2
                      clients:
                        type: array
                        items:
                          type: object
                          properties:
                            table_id:
                              type: integer
                              example: 5
  /cx/satisfaction-score:
    get:
      summary: 5.4 Índice de Satisfacción (CSAT)
      tags: [Experiencia del Cliente]
      description: Promedio de calificaciones y distribución (0–5).
      parameters:
        - in: query
          name: date
          schema:
            type: string
            example: 2026-01-31
          description: Fecha opcional (YYYY-MM-DD).
        - in: query
          name: from
          schema:
            type: string
            example: 2026-01-01T00:00:00.000Z
          description: Inicio de rango (ISO).
        - in: query
          name: to
          schema:
            type: string
            example: 2026-01-31T23:59:59.999Z
          description: Fin de rango (ISO).
      responses:
        200:
          description: Éxito
          content:
            application/json:
              schema:
                type: object
                properties:
                  satisfaction_score:
                    type: object
                    properties:
                      count:
                        type: integer
                        example: 42
                      average:
                        type: number
                        example: 4.2
                      distribution:
                        type: object
                        example:
                          "0": 0
                          "1": 1
                          "2": 3
                          "3": 8
                          "4": 15
                          "5": 15
